{"ast":null,"code":"import React,{useState}from\"react\";import{collection,addDoc,getDocs,query,where}from\"firebase/firestore\";import{auth,db}from\"../init-firebase\";import Swal from\"sweetalert2\";import{signOut}from\"firebase/auth\";import{Helmet}from\"react-helmet\";import Footer from'./Footer';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const[name,setName]=useState(\"\");const[age,setAge]=useState(\"\");const[bloodGroup,setBloodGroup]=useState(\"\");const[city,setCity]=useState(\"\");const[ContactNo,setContactNo]=useState(\"\");const[isNavbarOpen,setIsNavbarOpen]=useState(false);const Navigate=useNavigate();const DonateButton=async()=>{if(!name||!bloodGroup||!city||!ContactNo||!age){Swal.fire(\"Please fill in all the Inputs before you Donate Blood .\");return;}const user=auth.currentUser;if(!user){Swal.fire(\"Please log in to donate blood.\");return;}try{const q=query(collection(db,\"BloodDonors\"),where(\"Email\",\"==\",user.email));const donorSnapshot=await getDocs(q);if(!donorSnapshot.empty){Swal.fire(\"You have already donated blood once.\");return;}await addDoc(collection(db,\"BloodDonors\"),{DonerName:name,DonerBloodGroup:bloodGroup,CityName:city,ContactNo:ContactNo,Age:age,Email:user.email,DonationDate:new Date()});Swal.fire(`Thank you ${name} from ${city} for your blood donation!`);setName(\"\");setBloodGroup(\"\");setCity(\"\");setContactNo(\"\");setAge(\"\");}catch(error){console.error(\"Error donating blood:\",error.message);// Log the detailed error message\nSwal.fire(\"An error occurred while donating blood. Please try again.\");}};const LogOut=async()=>{try{await signOut(auth);Swal.fire({title:\"Do you want to Logout?\",showDenyButton:true,showCancelButton:true,confirmButtonText:\"Yes \",denyButtonText:`Cancel `}).then(result=>{if(result.isConfirmed){Swal.fire(\"Saved!\",\"\",\"success\");}else if(result.isDenied){Swal.fire(\"As Your Wish\",\"\");}});Navigate('/login');}catch(error){console.error(\"Error logging out:\",error);}};const toggleNavbar=()=>{setIsNavbarOpen(!isNavbarOpen);};return/*#__PURE__*/_jsxs(\"div\",{className:\"homepage\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"HomePage\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-brand\",children:\"Blood Bank\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-toggle\",onClick:toggleNavbar,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:`navbar-links ${isNavbarOpen?\"open\":\"\"}`,children:[/*#__PURE__*/_jsx(\"a\",{href:\"/home\",children:\"Home\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/profile\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:LogOut,children:\"Logout\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/doner\",children:\"Doner's\"})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Blood Bank\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Your Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Enter Your Age\",value:age,onChange:e=>setAge(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Blood Group\",value:bloodGroup,onChange:e=>setBloodGroup(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter City\",value:city,onChange:e=>setCity(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Contact No\",value:ContactNo,onChange:e=>setContactNo(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:/*#__PURE__*/_jsx(\"button\",{onClick:DonateButton,className:\"btn donate-btn\",children:\"Donate Blood\"})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default HomePage;","map":{"version":3,"names":["React","useState","collection","addDoc","getDocs","query","where","auth","db","Swal","signOut","Helmet","Footer","useNavigate","jsx","_jsx","jsxs","_jsxs","HomePage","name","setName","age","setAge","bloodGroup","setBloodGroup","city","setCity","ContactNo","setContactNo","isNavbarOpen","setIsNavbarOpen","Navigate","DonateButton","fire","user","currentUser","q","email","donorSnapshot","empty","DonerName","DonerBloodGroup","CityName","Age","Email","DonationDate","Date","error","console","message","LogOut","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","isDenied","toggleNavbar","className","children","onClick","href","type","placeholder","value","onChange","e","target"],"sources":["C:/Desktop/test project/myapp/src/components/home.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { collection, addDoc, getDocs, query, where } from \"firebase/firestore\";\r\nimport { auth, db } from \"../init-firebase\";\r\nimport Swal from \"sweetalert2\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport Footer from './Footer'\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst HomePage = () => {\r\n        const [name, setName] = useState(\"\");\r\n        const [age, setAge] = useState(\"\");\r\n        const [bloodGroup, setBloodGroup] = useState(\"\");\r\n        const [city, setCity] = useState(\"\");\r\n        const [ContactNo, setContactNo] = useState(\"\");\r\n        const [isNavbarOpen, setIsNavbarOpen] = useState(false);\r\n        const Navigate=useNavigate()\r\n        const DonateButton = async () => {\r\n    if (!name || !bloodGroup || !city || !ContactNo || !age) {\r\n      Swal.fire(\"Please fill in all the Inputs before you Donate Blood .\");\r\n      return;\r\n    }\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      Swal.fire(\"Please log in to donate blood.\");\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const q = query(\r\n        collection(db, \"BloodDonors\"),\r\n        where(\"Email\", \"==\", user.email)\r\n      );\r\n      const donorSnapshot = await getDocs(q);\r\n  \r\n      if (!donorSnapshot.empty) {\r\n        Swal.fire(\"You have already donated blood once.\");\r\n        return;\r\n      }\r\n  \r\n      await addDoc(collection(db, \"BloodDonors\"), {\r\n        DonerName: name,\r\n        DonerBloodGroup: bloodGroup,\r\n        CityName: city,\r\n        ContactNo: ContactNo,\r\n        Age: age,\r\n        Email: user.email,\r\n        DonationDate: new Date()\r\n      });\r\n  \r\n      Swal.fire(`Thank you ${name} from ${city} for your blood donation!`);\r\n      setName(\"\");\r\n      setBloodGroup(\"\");\r\n      setCity(\"\");\r\n      setContactNo(\"\");\r\n      setAge(\"\");\r\n    } catch (error) {\r\n      console.error(\"Error donating blood:\", error.message); // Log the detailed error message\r\n      Swal.fire(\"An error occurred while donating blood. Please try again.\");\r\n    }\r\n  };\r\n  \r\n  const LogOut = async () => {\r\n    try {\r\n      await signOut(auth);\r\n      Swal.fire({\r\n        title: \"Do you want to Logout?\",\r\n        showDenyButton: true,\r\n        showCancelButton: true,\r\n        confirmButtonText: \"Yes \",\r\n        denyButtonText: `Cancel `\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          Swal.fire(\"Saved!\", \"\", \"success\");\r\n        } else if (result.isDenied) {\r\n          Swal.fire(\"As Your Wish\", \"\");\r\n        }\r\n      }); \r\n      Navigate('/login')\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error);\r\n     \r\n    }\r\n  };\r\n  const toggleNavbar = () => {\r\n    setIsNavbarOpen(!isNavbarOpen);\r\n  };\r\n  return (\r\n    <div className=\"homepage\">\r\n      <Helmet>\r\n        <title>HomePage</title>\r\n      </Helmet>\r\n      <div className=\"navbar\">\r\n      <div className=\"navbar-brand\">Blood Bank</div>\r\n      <div className=\"navbar-toggle\" onClick={toggleNavbar}>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n      <div className={`navbar-links ${isNavbarOpen ? \"open\" : \"\"}`}>\r\n        <a href=\"/home\">Home</a>\r\n        <a href=\"/profile\">Profile</a>\r\n        <button onClick={LogOut}>Logout</button>\r\n        <a href=\"/doner\">Doner's</a>\r\n      </div>\r\n    </div>\r\n\r\n      <h1 className=\"title\">Blood Bank</h1>\r\n      <div className=\"form-container\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter Your Name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Enter Your Age\"\r\n          value={age}\r\n          onChange={(e) => setAge(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter Blood Group\"\r\n          value={bloodGroup}\r\n          onChange={(e) => setBloodGroup(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter City\"\r\n          value={city}\r\n          onChange={(e) => setCity(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter Contact No\"\r\n          value={ContactNo}\r\n          onChange={(e) => setContactNo(e.target.value)}\r\n        />\r\n        <div className=\"button-group\">\r\n          <button onClick={DonateButton} className=\"btn donate-btn\">\r\n            Donate Blood\r\n          </button>\r\n        \r\n        </div>\r\n      </div>\r\n\r\n       <Footer/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}