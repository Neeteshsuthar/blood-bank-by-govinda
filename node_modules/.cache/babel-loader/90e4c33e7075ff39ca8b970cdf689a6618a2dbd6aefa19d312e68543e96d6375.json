{"ast":null,"code":"// import React, { useState } from \"react\";\n// import { Helmet } from \"react-helmet\";\n// import { auth, db } from \"../init-firebase\";\n// import { doc, getDoc, updateDoc } from \"firebase/firestore\";\n// import { updateEmail, updatePassword, reauthenticateWithCredential, EmailAuthProvider } from \"firebase/auth\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function UpdateProfile() {\n//   const [name, setName] = useState(\"\");\n//   const [email, setEmail] = useState(\"\");\n//   const [password, setPassword] = useState(\"\");\n//   const [role, setRole] = useState(\"\");\n//   const [currentPassword, setCurrentPassword] = useState(\"\");\n//   const navigate = useNavigate();\n\n//   const Submitbtn = async (event) => {\n//     event.preventDefault();\n\n//     const currentUser = auth.currentUser;\n//     if (!currentUser) {\n//       alert(\"No user is logged in.\");\n//       return;\n//     }\n\n//     const userId = currentUser.uid;\n//     const profileData = { Name: name, UserEmail: email, Role: role };\n\n//     try {\n//       // Check if the user document exists\n//       const userDocRef = doc(db, \"SignupUser\", userId); // Corrected collection name\n//       const userDocSnapshot = await getDoc(userDocRef);\n\n//       if (!userDocSnapshot.exists()) {\n//         alert(\"User document not found!\");\n//         return;\n//       }\n\n//       // Update Firestore with profile data\n//       await updateDoc(userDocRef, profileData);\n//       alert(\"Profile updated successfully!\");\n\n//       // Update email\n//       if (email && email !== currentUser.email) {\n//         await updateEmail(currentUser, email);\n//         alert(\"Email updated successfully!\");\n//       }\n\n//       // Update password\n//       if (password) {\n//         if (!currentPassword) {\n//           alert(\"Please enter your current password to update your password.\");\n//           return;\n//         }\n//         const credential = EmailAuthProvider.credential(currentUser.email, currentPassword);\n//         await reauthenticateWithCredential(currentUser, credential);\n//         await updatePassword(currentUser, password);\n//         alert(\"Password updated successfully!\");\n//       }\n\n//       // Redirect to dashboard after all updates\n//       navigate(\"/dashboard\");\n\n//     } catch (error) {\n//       console.error(\"Error updating profile:\", error);\n//       alert(error.message || \"Failed to update profile. Please try again.\");\n//     }\n//   };\n\n//   return (\n//     <div className=\"flex min-h-screen items-center justify-center bg-red-100\">\n//       <Helmet>\n//         <title>Update Profile</title>\n//       </Helmet>\n//       <div className=\"w-full max-w-md bg-white rounded-lg shadow-lg p-6\">\n//         <h2 className=\"text-2xl font-bold text-red-600 text-center\">Update Profile</h2>\n//         <form onSubmit={Submitbtn}>\n//           <div className=\"mb-4\">\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"name\">Name</label>\n//             <input\n//               type=\"text\"\n//               id=\"name\"\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\n//               placeholder=\"Enter your name\"\n//               value={name}\n//               onChange={(e) => setName(e.target.value)} // Ensuring the value is updated\n//             />\n//           </div>\n//           <div className=\"mb-4\">\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"email\">Email</label>\n//             <input\n//               type=\"email\"\n//               id=\"email\"\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\n//               placeholder=\"Enter your email\"\n//               value={email}\n//               onChange={(e) => setEmail(e.target.value)}\n//             />\n//           </div>\n//           <div className=\"mb-4\">\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"currentPassword\">Current Password</label>\n//             <input\n//               type=\"password\"\n//               id=\"currentPassword\"\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\n//               placeholder=\"Enter your current password\"\n//               value={currentPassword}\n//               onChange={(e) => setCurrentPassword(e.target.value)}\n//             />\n//           </div>\n//           <div className=\"mb-4\">\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"password\">New Password</label>\n//             <input\n//               type=\"password\"\n//               id=\"password\"\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\n//               placeholder=\"Enter your new password\"\n//               value={password}\n//               onChange={(e) => setPassword(e.target.value)}\n//             />\n//           </div>\n//           <div className=\"mb-4\">\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"role\">Role</label>\n//             <select\n//               id=\"role\"\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\n//               value={role}\n//               onChange={(e) => setRole(e.target.value)}\n//             >\n//               <option value=\"Donor\">Donor</option>\n//               <option value=\"Receiver\">Receiver</option>\n//             </select>\n//           </div>\n//           <div className=\"mb-4\">\n//             <button\n//               type=\"submit\"\n//               className=\"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg\"\n//             >\n//               Update Profile\n//             </button>\n//           </div>\n//         </form>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default UpdateProfile;","map":{"version":3,"names":[],"sources":["C:/Desktop/test project/myapp/src/components/profile.jsx"],"sourcesContent":["// import React, { useState } from \"react\";\r\n// import { Helmet } from \"react-helmet\";\r\n// import { auth, db } from \"../init-firebase\";\r\n// import { doc, getDoc, updateDoc } from \"firebase/firestore\";\r\n// import { updateEmail, updatePassword, reauthenticateWithCredential, EmailAuthProvider } from \"firebase/auth\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n// function UpdateProfile() {\r\n//   const [name, setName] = useState(\"\");\r\n//   const [email, setEmail] = useState(\"\");\r\n//   const [password, setPassword] = useState(\"\");\r\n//   const [role, setRole] = useState(\"\");\r\n//   const [currentPassword, setCurrentPassword] = useState(\"\");\r\n//   const navigate = useNavigate();\r\n\r\n//   const Submitbtn = async (event) => {\r\n//     event.preventDefault();\r\n\r\n//     const currentUser = auth.currentUser;\r\n//     if (!currentUser) {\r\n//       alert(\"No user is logged in.\");\r\n//       return;\r\n//     }\r\n\r\n//     const userId = currentUser.uid;\r\n//     const profileData = { Name: name, UserEmail: email, Role: role };\r\n\r\n//     try {\r\n//       // Check if the user document exists\r\n//       const userDocRef = doc(db, \"SignupUser\", userId); // Corrected collection name\r\n//       const userDocSnapshot = await getDoc(userDocRef);\r\n\r\n//       if (!userDocSnapshot.exists()) {\r\n//         alert(\"User document not found!\");\r\n//         return;\r\n//       }\r\n\r\n//       // Update Firestore with profile data\r\n//       await updateDoc(userDocRef, profileData);\r\n//       alert(\"Profile updated successfully!\");\r\n\r\n//       // Update email\r\n//       if (email && email !== currentUser.email) {\r\n//         await updateEmail(currentUser, email);\r\n//         alert(\"Email updated successfully!\");\r\n//       }\r\n\r\n//       // Update password\r\n//       if (password) {\r\n//         if (!currentPassword) {\r\n//           alert(\"Please enter your current password to update your password.\");\r\n//           return;\r\n//         }\r\n//         const credential = EmailAuthProvider.credential(currentUser.email, currentPassword);\r\n//         await reauthenticateWithCredential(currentUser, credential);\r\n//         await updatePassword(currentUser, password);\r\n//         alert(\"Password updated successfully!\");\r\n//       }\r\n\r\n//       // Redirect to dashboard after all updates\r\n//       navigate(\"/dashboard\");\r\n\r\n//     } catch (error) {\r\n//       console.error(\"Error updating profile:\", error);\r\n//       alert(error.message || \"Failed to update profile. Please try again.\");\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"flex min-h-screen items-center justify-center bg-red-100\">\r\n//       <Helmet>\r\n//         <title>Update Profile</title>\r\n//       </Helmet>\r\n//       <div className=\"w-full max-w-md bg-white rounded-lg shadow-lg p-6\">\r\n//         <h2 className=\"text-2xl font-bold text-red-600 text-center\">Update Profile</h2>\r\n//         <form onSubmit={Submitbtn}>\r\n//           <div className=\"mb-4\">\r\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"name\">Name</label>\r\n//             <input\r\n//               type=\"text\"\r\n//               id=\"name\"\r\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\r\n//               placeholder=\"Enter your name\"\r\n//               value={name}\r\n//               onChange={(e) => setName(e.target.value)} // Ensuring the value is updated\r\n//             />\r\n//           </div>\r\n//           <div className=\"mb-4\">\r\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"email\">Email</label>\r\n//             <input\r\n//               type=\"email\"\r\n//               id=\"email\"\r\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\r\n//               placeholder=\"Enter your email\"\r\n//               value={email}\r\n//               onChange={(e) => setEmail(e.target.value)}\r\n//             />\r\n//           </div>\r\n//           <div className=\"mb-4\">\r\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"currentPassword\">Current Password</label>\r\n//             <input\r\n//               type=\"password\"\r\n//               id=\"currentPassword\"\r\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\r\n//               placeholder=\"Enter your current password\"\r\n//               value={currentPassword}\r\n//               onChange={(e) => setCurrentPassword(e.target.value)}\r\n//             />\r\n//           </div>\r\n//           <div className=\"mb-4\">\r\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"password\">New Password</label>\r\n//             <input\r\n//               type=\"password\"\r\n//               id=\"password\"\r\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\r\n//               placeholder=\"Enter your new password\"\r\n//               value={password}\r\n//               onChange={(e) => setPassword(e.target.value)}\r\n//             />\r\n//           </div>\r\n//           <div className=\"mb-4\">\r\n//             <label className=\"block text-gray-700 text-sm font-medium\" htmlFor=\"role\">Role</label>\r\n//             <select\r\n//               id=\"role\"\r\n//               className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-lg\"\r\n//               value={role}\r\n//               onChange={(e) => setRole(e.target.value)}\r\n//             >\r\n//               <option value=\"Donor\">Donor</option>\r\n//               <option value=\"Receiver\">Receiver</option>\r\n//             </select>\r\n//           </div>\r\n//           <div className=\"mb-4\">\r\n//             <button\r\n//               type=\"submit\"\r\n//               className=\"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg\"\r\n//             >\r\n//               Update Profile\r\n//             </button>\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default UpdateProfile;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}